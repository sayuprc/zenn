---
title: "textareaã§ã®æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã¨é€ä¿¡å¾Œã®æ”¹è¡Œã‚³ãƒ¼ãƒ‰"
emoji: "ğŸ’­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["html"]
published: true
---

è‰¯ãå¿˜ã‚Œã¦ã—ã¾ã†ã®ã§ãƒ¡ãƒ¢ã¨ã—ã¦æ®‹ã—ã¦ãŠãã€‚

## çµè«–

textarea ä¸Šã§ã®æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã¯ `LF` ã§ã€é€ä¿¡å¾Œ `CRLF` ã«ãªã‚‹ã€‚

## æ¤œè¨¼ç”¨ã‚³ãƒ¼ãƒ‰

```html:index.html
<body>
    <form action="/post.php" method="post" id="textarea">
        <textarea name="value"></textarea>
        <input type="submit" value="post">
    </form>

    <p>æ”¹è¡Œã‚³ãƒ¼ãƒ‰ <span id="new-line-char"></span></p>

    <script>
        document.getElementById('textarea').addEventListener('change', event => {
            document.getElementById('new-line-char').innerText = getNewLineChar(event.target.value);
        });

        function getNewLineChar(str) {
            if (str.match(/\r\n/)) {
                return 'CRLF';
            } else if (str.match(/\r/)) {
                return 'CR';
            } else if (str.match(/\n/)) {
                return 'LF';
            } else {
                return '';
            }
        }
    </script>
</body>
```

```php:post.php
<?php

function getNewLineChar(?string $str): string
{
    return match (true) {
        (bool)preg_match('/\r\n/', $str) => 'CRLF',
        (bool)preg_match('/\r/', $str) => 'CR',
        (bool)preg_match('/\n/', $str) => 'LF',
        default => '',
    };
}

echo 'æ”¹è¡Œã‚³ãƒ¼ãƒ‰: ' , getNewLineChar($_POST['value']);
```

## å‚è€ƒ

[HTML Standard](https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element)
